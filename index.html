<html><head><base href="https://docs.google.com/spreadsheets/d/1PmaW9_7i4LtsuCCCVlMOhW0srmn4SH5mWowFSO0itD4/edit?usp=sharing"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#1a1a1a;color:#fff;overflow-x:hidden}.container{max-width:100vw;margin:0 auto;overflow:hidden;padding:20px;width:100%;position: relative;}.header{background:#2d2d2d;padding:30px;box-shadow:0 4px 15px rgba(0,0,0,.3);margin-bottom:30px;border-radius:15px}.header h1{text-align:center;margin-bottom:20px;color:#fff;transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);transform-origin: center;}.stats-container{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:15px;background:rgba(0,0,0,.2);border-radius:10px}.map-count,.area-map-count{color:#fff;font-size:14px}.category-count{color:#fff;font-size:14px}.recommendation{display: flex;align-items: center;justify-content: space-between;gap: 20px;background:#2d2d2d;padding:20px;border-radius:15px;margin:20px 0;box-shadow:0 4px 15px rgba(0,0,0,.3)}.recommendation-content{flex: 1;}.recommendation-animation{width: 100px;height: 100px;flex-shrink: 0;}.recommendation h3{color:#fff;margin-bottom:15px;text-transform:uppercase;}.recommendation p{color:#ddd;line-height:1.6}.home-btn{position:static;display:none;padding:10px 20px;background:linear-gradient(135deg,#a8030a,#c91f27);border:none;border-radius:10px;color:#fff;cursor:pointer;box-shadow:0 4px 15px rgba(0,0,0,.3);transition:all .3s;margin-top:10px;margin-bottom:20px}.home-btn:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.4);background:linear-gradient(135deg,#c91f27,#a8030a)}.recent-reads{margin:20px 0;padding:20px;background:#2d2d2d;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.3)}.recent-reads h2{margin-bottom:15px;color:#fff}.recent-books{display:flex;gap:20px;overflow-x:auto;padding:10px 0}.recent-book{min-width:150px;background:#333;border-radius:10px;padding:10px;transition:transform .3s;cursor:pointer}.recent-book:hover{transform:scale(1.05)}.recent-book img{width:100%;height:200px;object-fit:cover;border-radius:8px}.recent-book h4{font-size:14px;margin-top:10px;color:#fff}.recent-book .map-category{display:block;font-size:12px;color:#888;margin-top:4px;}.search-container{display:flex;justify-content:center;margin:20px 0}.search-box{position:relative;width:80%;z-index:101;}.search-input{width:100%;padding:15px 20px;font-size:16px;border:2px solid #444;border-radius:30px;outline:none;transition:all .3s;background:#333;color:#fff;box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);}.search-input:focus{border-color:#444;box-shadow:0 0 25px rgba(168, 3, 10, 0.3);}.search-icon{position:absolute;right:20px;top:50%;transform:translateY(-50%);color:#888}.search-preview{position:absolute;top:100%;left:0;width:100%;background:#333;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,.3);max-height:300px;overflow-y:auto;transform:none;display:none;z-index:100;margin-top:5px;}.preview-item{padding:12px 20px;border-bottom:1px solid #444;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:15px;}.preview-item img{width:50px;height:70px;object-fit:cover;border-radius:5px;}.preview-item-details{flex:1;}.preview-item:hover{background:#444;}.preview-item:last-child{border-bottom:none;}.preview-item small{font-size:12px;opacity:0.7;}.tabs{display:flex;gap:10px;margin:20px 0;flex-wrap:wrap;justify-content:center}.tab{padding:12px 24px;background:#2d2d2d;border:none;border-radius:20px;cursor:pointer;transition:all .3s;color:#fff;box-shadow:0 2px 8px rgba(0,0,0,.2)}.tab:hover,.tab.active{background:linear-gradient(135deg,#a8030a,#c91f27);color:#fff;box-shadow:0 4px 12px rgba(168, 3, 10, .3)}.maps-grid { display: flex; flex-direction: column; gap: 15px; padding: 20px; transition: opacity 0.4s ease-in-out, transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); } .map-item { background: #2d2d2d; padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; opacity: 0; transform: translateY(20px); transition: all 0.3s ease-out; position: relative; } .map-cover { width: 50px; height: 50px; object-fit: cover; border-radius: 5px; margin-right: 15px; transition: all 0.3s ease; cursor: zoom-in; } .map-cover:hover { position: absolute; width: 200px; height: 200px; z-index: 100; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transform: translateY(-50%); border-radius: 10px; } .map-item:hover .map-cover { transform: scale(1.05); } .iframe-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);z-index:1000}.iframe-container{position:fixed;top:0;left:0;width:100%;height:100%;background:#2d2d2d}.close-btn{position:fixed;top:15px;right:15px;background:linear-gradient(135deg,#a8030a,#c91f27);border:none;padding:8px 15px;border-radius:8px;cursor:pointer;color:#fff;z-index:1001;transition:all .3s}.close-btn:hover{background:linear-gradient(135deg,#c91f27,#a8030a);box-shadow:0 4px 12px rgba(168, 3, 10, .3)}.home-content{display:none}.home-content{margin-top:20px;}.recommendation{margin-top:30px;}.area-map-count.highlight { animation: highlightText 1.5s ease-in-out; font-weight: bold; color: #c91f27; } @keyframes highlightText { 0% { transform: scale(1); color: #fff; } 50% { transform: scale(1.1); color: #c91f27; } 100% { transform: scale(1); color: #c91f27; } } .mode-tabs { display: none; } .fade-out { opacity: 0; transform: translateY(20px); } .fade-in { opacity: 1; transform: translateY(0); } @keyframes shakeError { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } } @keyframes successPulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } } .password-input { width: 100%; padding: 15px; margin: 15px 0; border: 2px solid #444; border-radius: 10px; background: #1a1a1a; color: #fff; font-size: 16px; transition: all 0.3s ease; } .password-input.error { border-color: #ff4444; animation: shakeError 0.5s ease; } .password-input.success { border-color: #00ff00; animation: successPulse 0.5s ease; } .premium-badge { position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #DAA520, #FFD700); padding: 5px 10px; border-radius: 15px; color: #333; font-size: 12px; font-weight: bold; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); display: flex; align-items: center; gap: 5px; z-index: 1000; opacity: 0.8; } .premium-badge i { color: #333; font-size: 12px; } @media (max-width: 768px) {.search-box { width: 90%; }}.recent-book button { padding: 8px 20px; background: linear-gradient(135deg,#DAA520,#FFD700); border: none; border-radius: 8px; color: #000; cursor: pointer; transition: all 0.3s; margin-top: 10px; } .cover-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 2000; opacity: 0; transition: opacity 0.3s ease-in-out; } .cover-modal.show { opacity: 1; } .zoomed-cover { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.5); max-width: 90%; max-height: 90vh; border-radius: 10px; box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5); transition: transform 0.3s ease-in-out; } .zoomed-cover.show { transform: translate(-50%, -50%) scale(1); } .close-cover { position: absolute; top: 20px; right: 20px; background: linear-gradient(135deg,#a8030a,#c91f27); border: none; padding: 10px 20px; border-radius: 8px; color: #fff; cursor: pointer; z-index: 2001; transition: all 0.3s; } .close-cover:hover { background: linear-gradient(135deg,#c91f27,#a8030a); transform: translateY(-2px); } .download-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); display: flex; justify-content: center; align-items: center; z-index: 2000; animation: fadeIn 0.3s ease-out; } .download-content { margin: 1cm; padding: 20px; width: auto; max-width: 450px; height: auto; box-sizing: border-box; background: #2d2d2d; border-radius: 15px; overflow: hidden; text-align: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); } .download-cover { max-width: 300px; height: auto; transition: all 0.3s ease-out; } .download-cover.zoom { animation: downloadZoomEffect 0.5s ease-out; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100vw; height: 100vh; object-fit: cover; z-index: 2001; } @keyframes downloadZoomEffect { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.8; width: 100vw; height: 100vh; object-fit: cover; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 0; width: 100vw; height: 100vh; object-fit: cover; } } .action-buttons { display: flex; justify-content: center; gap: 20px; margin-top: 20px; } .favorite-btn, .download-btn, .read-later-btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 8px; } .favorite-btn { background: transparent; color: #ff4444; font-size: 24px; } .favorite-btn i { transition: transform 0.3s; } .favorite-btn:hover i { transform: scale(1.2); } .download-btn { background: linear-gradient(135deg,#a8030a,#c91f27); color: white; } .read-later-btn { background: #444; color: white; } .close-modal-btn { position: absolute; top: 10px; right: 10px; background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 5px; } .carousel-section { margin: 30px 0; padding: 20px; background: #2d2d2d; border-radius: 15px; } .carousel-container { display: flex; gap: 20px; overflow-x: auto; padding: 20px 0; } .carousel-item { min-width: 200px; text-align: center; cursor: pointer; transition: transform 0.3s ease; } .carousel-item img { width: 100%; height: 250px; object-fit: cover; border-radius: 10px; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } @keyframes scaleIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } } .read-later-btn { padding: 10px 20px; background: #444; color: white; display: flex; align-items: center; gap: 8px; transition: all 0.3s; } .read-later-btn i { transition: transform 0.3s ease, color 0.3s ease; } .read-later-btn:hover { background: #555; } .read-later-btn:hover i { transform: scale(1.1); } .read-later-btn i.fas { color: #FFD700; animation: bookmarkFill 0.3s ease forwards; } @keyframes bookmarkFill { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } } @keyframes downloadZoomEffect { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.8; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 0; } } .carousel-item:hover { transform: translateY(-5px); } .carousel-item img, .carousel-item h4 { cursor: pointer; } .carousel-item h4:hover { color: #a8030a; } .carousel-item button { padding: 8px 20px; background: linear-gradient(135deg,#a8030a,#c91f27); border: none; border-radius: 8px; color: #fff; cursor: pointer; transition: all 0.3s; margin-top: 10px; } .carousel-item button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(168, 3, 10, 0.3); background: linear-gradient(135deg,#c91f27,#a8030a); } @keyframes pulseHighlight { 0% { transform: scale(1); box-shadow: 0 0 0 rgba(168, 3, 10, 0.4); } 50% { transform: scale(1.03); box-shadow: 0 0 20px rgba(168, 3, 10, 0.6); } 100% { transform: scale(1); box-shadow: 0 0 0 rgba(168, 3, 10, 0.4); } } .map-item.highlight { animation: pulseHighlight 1s ease-out; } .pc-reader-btn { display: none; } .reader-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; } .video-container { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; } .video-container video { width: auto; height: auto; max-width: 100%; max-height: 100vh; object-fit: contain; } .premium-btn { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 15px 30px; background: linear-gradient(135deg, #DAA520, #FFD700); border: none; border-radius: 25px; color: #000; font-weight: bold; font-size: 18px; cursor: pointer; animation: pulse 1.5s infinite; z-index: 2001; } @keyframes pulse { 0% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.05); } 100% { transform: translateX(-50%) scale(1); } } .reader-options { display: flex; justify-content: center; margin-bottom: 20px; width: 100%; max-width: 600px; } .reader-options img { width: 100%; height: auto; object-fit: contain; margin-bottom: 20px; } .scrollable-synopsis { max-height: 150px; overflow-y: auto; background: #333; padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 14px; color: #ddd; line-height: 1.6; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); } .download-modal .download-content { margin: 1cm; max-width: 450px; background: #2d2d2d; border-radius: 15px; padding: 20px; text-align: center; } .download-modal .action-buttons { display: flex; justify-content: center; gap: 15px; margin-top: 20px; } .download-modal .premium-btn { background: linear-gradient(135deg, #DAA520, #FFD700); color: #000; font-weight: bold; padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; transition: all 0.3s; } .download-modal .premium-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3); }</style></head><body><div class="container">
<div style="text-align: left; font-size: 14px; color: #fff; margin-bottom: 15px; padding: 10px; background: linear-gradient(135deg, rgba(168, 3, 10, 0.3), rgba(201, 31, 39, 0.3)); border-radius: 8px; display: flex; align-items: center; gap: 10px;" id="last-update">
<i class="fas fa-info-circle" style="color: #c91f27;"></i>
<span id="download-count" style="margin-left: auto; font-weight: bold; background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 5px;">
Downloads restantes: <span style="color: #FFD700;">10</span>
</span>
</div>
<button class="home-btn" onclick="showHome()"><i class="fas fa-home"></i> Início</button>
<div class="header">
<h1>Livros de Sucesso</h1>
<div style="text-align: center; font-size: 14px; color: #ddd; margin-bottom: 15px; font-weight: 500;">Aumentando seu conhecimento 🧠📚</div>
<div style="display: flex; justify-content: center; margin-bottom: 20px;">
<iframe src="https://lottie.host/embed/4e97110d-f367-4019-a88b-5916876261bb/cfCNJrZtlo.lottie" style="width: 200px; height: 200px; border: none;" frameborder="0">
</iframe>
</div>
<div class="search-container">
<div class="search-box">
<input type="text" class="search-input" placeholder="Pesquisar Livro">
<i class="search-icon fas fa-search"></i>
</div>
</div>
<div class="stats-container">
<div class="map-count" id="map-count"></div>
<div class="category-count" id="category-count"></div>
<div class="area-map-count" id="area-map-count"></div>
</div>
</div>
<div class="tabs" id="tabs"></div>
<div id="home-content" class="home-content">
<div class="recommendation">
<div class="recommendation-content">
<h3>REFLITA</h3>
<p id="daily-recommendation">Carregando recomendação...</p>
</div>
<iframe class="recommendation-animation" src="https://lottie.host/embed/727109e7-6fe0-44f8-8e93-d168b2f9f0c2/fi5yyQLYCL.lottie" frameborder="0">
</iframe>
</div>
<div class="carousel-section">
<h2 style="color: #fff; margin-bottom: 20px;">
<i class="fas fa-heart" style="color: #ff4444;"></i> 
Seus Favoritos
</h2>
<div class="carousel-container">
<p style="color: #888;">Nenhum livro favorito ainda</p>
</div>
</div>
<div class="carousel-section">
<h2 style="color: #fff; margin-bottom: 20px;">
<i class="fas fa-bookmark" style="color: #FFD700;"></i> 
Ler Depois
</h2>
<div class="carousel-container">
<p style="color: #888;">Nenhum livro marcado para ler depois</p>
</div>
</div>
</div>
<div class="maps-grid" id="maps-grid"></div>
</div><div class="iframe-modal" id="iframe-modal"><div class="iframe-container"><button class="close-btn" onclick="closeModal()">Fechar</button><iframe id="map-iframe" width="100%" height="100%" frameborder="0"></iframe></div></div><script src="https://kit.fontawesome.com/a076d05399.js"></script><script>const USER_STORAGE_KEY = 'user_download_stats';const FAVORITES_KEY = 'favorite_maps';const READ_LATER_KEY = 'read_later_maps';const isSubscriber = localStorage.getItem('isSubscriber') === 'true';let userStats = JSON.parse(localStorage.getItem(USER_STORAGE_KEY)) || { downloads: 0, lastReset: new Date().getTime() };function checkAndResetMonthlyCounts() { const now = new Date().getTime(); const thirtyDays = 30 * 24 * 60 * 60 * 1000; if (now - userStats.lastReset > thirtyDays) { userStats = { downloads: 0, lastReset: now }; localStorage.setItem(USER_STORAGE_KEY, JSON.stringify(userStats)); } }function checkDownloadLimit(link, title, cover) { handleDownload(link, title, cover); } async function handleDownload(link, title, cover) { const coverImage = document.querySelector('.download-cover'); if (coverImage) { coverImage.classList.add('zoom'); coverImage.addEventListener('animationend', () => { coverImage.classList.remove('zoom'); closeDownloadModal(); window.open(link, '_blank'); if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { setTimeout(() => { if (currentTab) { displayMaps(currentMode === 'view' ? maps[currentTab] : downloadMaps[currentTab]); } } , 500); } }, { once: true }); }}document.addEventListener('DOMContentLoaded', () => { const downloadCount = document.getElementById('download-count'); if (downloadCount) { downloadCount.remove(); } });function showDownloadModal(link, title, cover) { let mapDetails = null; for (const category in maps) { const found = maps[category].find(m => m.link === link); if (found) { mapDetails = found; break; } } if (!mapDetails) { for (const category in downloadMaps) { const found = downloadMaps[category].find(m => m.link === link); if (found) { mapDetails = found; break; } } } const bookSynopsis = mapDetails?.synopsis || "Sinopse indisponível"; const bookRating = mapDetails?.rating || "Sem avaliações"; const modal = document.createElement('div'); modal.className = 'download-modal'; const favorites = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]'); const readLater = JSON.parse(localStorage.getItem(READ_LATER_KEY) || '[]'); const isFavorite = favorites.some(f => f.link === link); const isReadLater = readLater.some(r => r.link === link); modal.innerHTML = `<div class="download-content"><img src="${cover}" alt="${title}" class="download-cover"><h3>${title}</h3><div class="scrollable-synopsis">${bookSynopsis}</div><div style="font-size: 14px; color: #888; margin-top: 10px;">Avaliações: <strong>${bookRating}</strong></div><div class="action-buttons"><button class="favorite-btn" onclick="toggleFavorite('${link}', '${title}', '${cover}')"><i class="${isFavorite ? 'fas' : 'far'} fa-heart" id="heart-${link.replace(/[^a-zA-Z0-9]/g, '')}"></i></button><button class="download-btn" onclick="handleDownload('${link}', '${title}', '${cover}')">Download</button><button class="read-later-btn" onclick="toggleReadLater('${link}', '${title}', '${cover}')"><i class="${isReadLater ? 'fas' : 'far'} fa-bookmark" id="bookmark-${link.replace(/[^a-zA-Z0-9]/g, '')}"></i>Ler depois</button></div><button class="close-modal-btn" onclick="closeDownloadModal()">×</button></div>`; document.body.appendChild(modal); }function toggleFavorite(link, title, cover) { const favorites = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]'); const heartIcon = document.getElementById(`heart-${link.replace(/[^a-zA-Z0-9]/g, '')}`); const existingIndex = favorites.findIndex(f => f.link === link); if (existingIndex > -1) { favorites.splice(existingIndex, 1); heartIcon.classList.replace('fas', 'far'); } else { favorites.push({ link, title, cover }); heartIcon.classList.replace('far', 'fas'); } localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites)); if (document.getElementById('home-content').style.display === 'block') { updateHomeContent(); } } function toggleReadLater(link, title, cover) { const readLater = JSON.parse(localStorage.getItem(READ_LATER_KEY) || '[]'); const bookmarkIcon = document.getElementById(`bookmark-${link.replace(/[^a-zA-Z0-9]/g, '')}`); const existingIndex = readLater.findIndex(r => r.link === link); if (existingIndex > -1) { readLater.splice(existingIndex, 1); bookmarkIcon.classList.replace('fas', 'far'); } else { readLater.push({ link, title, cover }); bookmarkIcon.classList.replace('far', 'fas'); } localStorage.setItem(READ_LATER_KEY, JSON.stringify(readLater)); if (document.getElementById('home-content').style.display === 'block') { updateHomeContent(); } }function updateHomeContent() { const existingCarousels = document.querySelectorAll('.carousel-section'); existingCarousels.forEach(carousel => carousel.remove()); const homeContent = document.getElementById('home-content'); const favorites = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]'); const readLater = JSON.parse(localStorage.getItem(READ_LATER_KEY) || '[]'); const carouselSections = ` <div class="carousel-section"> <h2 style="color: #fff; margin-bottom: 20px;"> <i class="fas fa-heart" style="color: #ff4444;"></i> Seus Favoritos </h2> <div class="carousel-container"> ${favorites.length ? favorites.map(book => ` <div class="carousel-item"> <img src="${book.cover}" alt="${book.title}" onclick="showCoverZoom('${book.cover}')"> <h4 style="color: #fff; margin: 10px 0;">${book.title.replace('.pdf', '')}</h4> <button onclick="checkPassword('${book.link}', '${book.title}', '${book.cover}')"> Download </button> </div> `).join('') : '<p style="color: #888;">Nenhum livro favorito ainda</p>'} </div> </div> <div class="carousel-section"> <h2 style="color: #fff; margin-bottom: 20px;"> <i class="fas fa-bookmark" style="color: #FFD700;"></i> Ler Depois </h2> <div class="carousel-container"> ${readLater.length ? readLater.map(book => ` <div class="carousel-item"> <img src="${book.cover}" alt="${book.title}" onclick="showCoverZoom('${book.cover}')"> <h4 style="color: #fff; margin: 10px 0;">${book.title.replace('.pdf', '')}</h4> <button onclick="checkPassword('${book.link}', '${book.title}', '${book.cover}')"> Download </button> </div> `).join('') : '<p style="color: #888;">Nenhum livro marcado para ler depois</p>'} </div> </div> `; const recommendationDiv = homeContent.querySelector('.recommendation'); recommendationDiv.insertAdjacentHTML('afterend', carouselSections); }function showHome(){ const homeContent = document.getElementById('home-content'); const mapsGrid = document.getElementById('maps-grid'); const tabs = document.getElementById('tabs'); const homeBtn = document.querySelector('.home-btn'); const areaMapCount = document.getElementById('area-map-count'); homeContent.style.display = 'block'; mapsGrid.style.display = 'none'; tabs.style.display = 'flex'; homeBtn.style.display = 'none'; if (areaMapCount) { areaMapCount.style.display = 'none'; } const existingCarousels = document.querySelectorAll('.carousel-section'); existingCarousels.forEach(carousel => carousel.remove()); getDailyRecommendation(); updateHomeContent(); }async function handleDownload(link, title, cover) { const coverImage = document.querySelector('.download-cover'); if (coverImage) { coverImage.classList.add('zoom'); coverImage.addEventListener('animationend', () => { coverImage.classList.remove('zoom'); closeDownloadModal(); window.open(link, '_blank'); if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { setTimeout(() => { if (currentTab) { displayMaps(currentMode === 'view' ? maps[currentTab] : downloadMaps[currentTab]); } } , 500); } }, { once: true }); }}const API_KEY='AIzaSyCX26cgIpSd-BvtOLDdEQFa28_wh_HX1uk';const SPREADSHEET_ID='1PmaW9_7i4LtsuCCCVlMOhW0srmn4SH5mWowFSO0itD4';let downloadMaps = {};const DOWNLOAD_SPREADSHEET_ID = '1NJSOtgvZE-ckuXX0JQEBaBctKSa5T02I_nZ8iQc8IGY';let currentMode = 'view';const maps={};let currentTab='';let sheets=[];let phrases=[];const recentReads=JSON.parse(localStorage.getItem('recentReads'))||[];async function loadAccessPhrases() { const PHRASES_SPREADSHEET_ID = '1qIJtMbbCd75XpX3P7TBmZX7MqMxvTerXZkVnGCDWlcA'; try { const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PHRASES_SPREADSHEET_ID}/values/nova!A:A?key=${API_KEY}`); const data = await response.json(); return data.values?.slice(1).map(row => row[0]) || []; } catch (error) { console.error('Error loading access phrases:', error); return []; } } function formatDate(date) { return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' }); } function updateLastUpdateDate() { const lastUpdateElement = document.getElementById('last-update'); const now = new Date(); let lastUpdate = localStorage.getItem('lastUpdateDate'); if (!lastUpdate || (now - new Date(lastUpdate)) > (3 * 24 * 60 * 60 * 1000)) { lastUpdate = now.toISOString(); localStorage.setItem('lastUpdateDate', lastUpdate); } lastUpdateElement.textContent = `Última atualização: ${formatDate(new Date(lastUpdate))}`; } async function loadPhrases() { try { const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/nova!P:P?key=${API_KEY}`); const data = await response.json(); if (data.values) { phrases = data.values.slice(1).map(row => row[0]).filter(phrase => phrase); } } catch (error) { console.error('Error loading phrases:', error); } } function getDailyRecommendation() { if (phrases.length > 0) { const randomIndex = Math.floor(Math.random() * phrases.length); document.getElementById('daily-recommendation').textContent = phrases[randomIndex]; } else { const recommendations = ['Dedique pelo menos 30 minutos à leitura hoje para melhorar seu conhecimento.','A leitura diária é fundamental para se manter atualizado.','Experimente ler sobre uma área diferente hoje para expandir seus horizontes.']; const randomIndex = Math.floor(Math.random() * recommendations.length); document.getElementById('daily-recommendation').textContent = recommendations[randomIndex]; }}async function loadSheetData(){try{const readResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}?key=${API_KEY}`);const readData = await readResponse.json();sheets = readData.sheets;const downloadResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${DOWNLOAD_SPREADSHEET_ID}?key=${API_KEY}`);const downloadData = await downloadResponse.json();const tabsContainer=document.getElementById('tabs');tabsContainer.innerHTML='';sheets.forEach(sheet=>{if(sheet.properties.title.toLowerCase()!=='frases'){const tabButton=document.createElement('button');tabButton.className='tab';tabButton.textContent=sheet.properties.title;tabButton.onclick=()=>changeTab(sheet.properties.title);tabsContainer.appendChild(tabButton);loadSheetContent(sheet.properties.title);loadDownloadContent(sheet.properties.title);}});loadPhrases();showHome();}catch(error){console.error('Error loading spreadsheet:',error)}}async function loadDownloadContent(sheetName) { try { const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${DOWNLOAD_SPREADSHEET_ID}/values/${sheetName}?key=${API_KEY}`); const data = await response.json(); downloadMaps[sheetName] = data.values.slice(1).map(row => ({ title: row[0], link: row[1], cover: row[2] })); } catch (error) { console.error('Error loading download content:', error); } } function showHome(){ const homeContent = document.getElementById('home-content'); const mapsGrid = document.getElementById('maps-grid'); const tabs = document.getElementById('tabs'); const homeBtn = document.querySelector('.home-btn'); const areaMapCount = document.getElementById('area-map-count'); homeContent.style.display = 'block'; mapsGrid.style.display = 'none'; tabs.style.display = 'flex'; homeBtn.style.display = 'none'; if (areaMapCount) { areaMapCount.style.display = 'none'; } const existingCarousels = document.querySelectorAll('.carousel-section'); existingCarousels.forEach(carousel => carousel.remove()); getDailyRecommendation(); updateHomeContent(); }function switchMode(mode) { const mainTitle = document.querySelector('.header h1'); const mapsGrid = document.getElementById('maps-grid'); const tabs = document.querySelectorAll('.mode-tab'); mapsGrid.classList.add('fade-out'); mainTitle.style.transform = 'scale(0.95)'; mainTitle.style.opacity = '0'; tabs.forEach(tab => { if (tab.dataset.mode === mode) { tab.classList.add('active'); tab.style.transform = 'scale(1.05)'; setTimeout(() => tab.style.transform = 'scale(1)', 200); } else { tab.classList.remove('active'); } }); setTimeout(() => { currentMode = mode; mainTitle.textContent = mode === 'view' ? 'Livros de Sucesso' : 'Download de Livros'; if (mode === 'view') { if (currentTab) { displayMaps(maps[currentTab]); } else { showHome(); } } else { if (currentTab) { displayMaps(downloadMaps[currentTab]); } } requestAnimationFrame(() => { mainTitle.style.transform = 'scale(1)'; mainTitle.style.opacity = '1'; mapsGrid.classList.remove('fade-out'); mapsGrid.classList.add('fade-in'); }); }, 400); } function changeTab(tabName){ if (!tabName) return; currentTab=tabName;document.getElementById('home-content').style.display='none';document.getElementById('maps-grid').style.display='flex';document.getElementById('tabs').style.display='none';document.querySelector('.home-btn').style.display='inline-block';const areaMapCount = document.getElementById('area-map-count'); if (areaMapCount) { areaMapCount.style.display = 'block'; const mapList = currentMode === 'view' ? maps[tabName] : downloadMaps[tabName]; const count = mapList && Array.isArray(mapList) ? mapList.length : 0; areaMapCount.textContent = `Livros nesta área: ${count}`; areaMapCount.classList.remove('highlight'); void areaMapCount.offsetWidth; areaMapCount.classList.add('highlight'); } displayMaps(currentMode === 'view' ? maps[tabName] : downloadMaps[tabName]);}async function loadSheetContent(sheetName) { if (!sheetName) return; try { const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${sheetName}?key=${API_KEY}`); const data = await response.json(); if (!data || !data.values) { console.error('No data received for sheet:', sheetName); maps[sheetName] = []; return; } maps[sheetName] = data.values.slice(1).map(row => ({ title: row[0] || '', link: row[1] || '', cover: row[6] || '', rating: row[3] || "Sem avaliações", synopsis: row[5] || "Sinopse indisponível" })).filter(map => map.title && map.link); updateMapCount(); if (currentTab === sheetName) { const areaMapCount = document.getElementById('area-map-count'); if (areaMapCount) { areaMapCount.textContent = `Livros nesta área: ${maps[sheetName].length}`; } } } catch (error) { console.error('Error loading sheet content:', error); maps[sheetName] = []; }}function updateMapCount(){const totalMaps=Object.values(maps).reduce((total,categoryMaps)=>total+categoryMaps.length,0);document.getElementById('map-count').textContent=`Total de Livros: ${totalMaps}`}function checkPassword(link, title, cover) { showDownloadModal(link, title, cover); } function closeDownloadModal() { const modal = document.querySelector('.download-modal'); if (modal) { modal.remove(); } } function displayMaps(mapsList){ const grid=document.getElementById('maps-grid'); grid.style.display = 'flex'; grid.style.flexDirection = 'column'; grid.style.gap = '15px'; grid.innerHTML=''; if (!mapsList || !Array.isArray(mapsList)) { grid.innerHTML = '<div style="text-align: center; padding: 20px; color: #888;">Nenhum mapa encontrado</div>'; return; } mapsList.forEach((map, index) => { if (!map || !map.title || !map.link) { return; } const formattedTitle = (map.title || '').replace('.pdf', '').replace(/(\d+)/g, '<strong>$1</strong>'); const item = document.createElement('div'); item.className = 'map-item'; item.style.cssText = ` background: #2d2d2d; padding: 15px; border-radius: 10px; display: flex; flex-direction: column; gap: 10px; opacity: 0; transform: translateY(20px); transition: all 0.3s ease-out ${index * 50}ms; `; const coverHtml = map.cover ? `<img src="${map.cover}" alt="${map.title}" class="map-cover" onclick="showCoverZoom('${map.cover}')">` : ''; item.innerHTML = ` <div style="display: flex; align-items: center;"> ${coverHtml} <div style="flex: 1; margin-left: 10px;"> <h3 style="color: #fff; margin: 0;">${formattedTitle}</h3> <p style="color: #888; font-size: 14px;">Avaliação: <strong>${map.rating}</strong></p> </div> </div> <button onclick="checkPassword('${map.link}','${formattedTitle}','${map.cover}')" style="align-self: flex-end; padding: 8px 20px; background: linear-gradient(135deg,#a8030a,#c91f27); border: none; border-radius: 8px; color: #fff; cursor: pointer; transition: all 0.3s;">Download</button> `; grid.appendChild(item); requestAnimationFrame(() => { item.style.opacity = '1'; item.style.transform = 'translateY(0)'; }); }); } function updateRecentReads(){ const recentContainer=document.getElementById('recent-books'); recentContainer.innerHTML=''; recentReads.slice(0, 5).forEach(map=>{ const formattedTitle = map.title.replace('.pdf', '').replace(/(\\d+)/g, '<strong>$1</strong>'); const recentMap=document.createElement('div'); recentMap.className='recent-book'; recentMap.innerHTML=`<h4>${formattedTitle}</h4><small class="map-category">${map.category || ''}</small><button onclick="handleDownload('${map.link}', '${map.title}', '')" style="padding: 8px 20px; background: linear-gradient(135deg,#DAA520,#FFD700); border: none; border-radius: 8px; color: #000; cursor: pointer; transition: all 0.3s; margin-top: 10px;">Download</button>`; recentContainer.appendChild(recentMap)})} function openMap(link,title,cover){ const modal=document.getElementById('iframe-modal'); const iframe=document.getElementById('map-iframe'); const premiumBadge = document.querySelector('.premium-badge'); if (premiumBadge) { premiumBadge.style.display = 'none'; } document.querySelector('.home-btn').style.display = 'none'; iframe.src=link; modal.style.display='block'; let mapCategory=''; for(const category in maps){ if(maps[category].some(m=>m.link===link)){ mapCategory=category; break}} const mapData={title,link,cover,category:mapCategory,timestamp:Date.now()}; const existingIndex=recentReads.findIndex(map=>map.link===link); if (existingIndex>-1){ recentReads.splice(existingIndex,1)} recentReads.unshift(mapData); if(recentReads.length>5){ recentReads.pop()} localStorage.setItem('recentReads',JSON.stringify(recentReads)); updateRecentReads()} function closeModal(){ const modal = document.getElementById('iframe-modal'); const iframe = document.getElementById('map-iframe'); const homeBtn = document.querySelector('.home-btn'); const premiumBadge = document.querySelector('.premium-badge'); iframe.src=''; modal.style.display='none'; homeBtn.style.display='inline-block'; if (premiumBadge && localStorage.getItem('isSubscriber') === 'true') { premiumBadge.style.display = 'flex'; } } function normalizeText(text) { return text.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, ''); } document.querySelector('.search-input').addEventListener('input', e => { const searchTerm = normalizeText(e.target.value); const searchBox = document.querySelector('.search-box'); const existingPreview = document.querySelector('.search-preview'); if (existingPreview) { existingPreview.remove(); } if (searchTerm === '') { if (currentTab) { displayMaps(currentMode === 'view' ? maps[currentTab] : downloadMaps[currentTab]); document.getElementById('tabs').style.display = 'none'; document.querySelector('.home-btn').style.display = 'inline-block'; } else { document.getElementById('maps-grid').style.display = 'none'; document.getElementById('home-content').style.display = 'block'; document.getElementById('tabs').style.display = 'flex'; document.querySelector('.home-btn').style.display = 'none'; } return; } const previewContainer = document.createElement('div'); previewContainer.className = 'search-preview'; const allMatches = []; const sourceMaps = currentMode === 'view' ? maps : downloadMaps; Object.entries(sourceMaps).forEach(([category, categoryMaps]) => { categoryMaps.forEach(map => { const normalizedTitle = normalizeText(map.title); if (normalizedTitle.includes(searchTerm)) { allMatches.push({...map, category}); } }); }); allMatches.slice(0, 5).forEach(map => { const formattedTitle = map.title.replace('.pdf', '').replace(/(\d+)/g, '<strong>$1</strong>'); const previewItem = document.createElement('div'); previewItem.className = 'preview-item'; previewItem.innerHTML = ` <img src="${map.cover}" alt="${formattedTitle}"> <div class="preview-item-details"> <div>${formattedTitle}</div><small style="color: #888;">${map.category}</small> </div> `; previewItem.onclick = () => { changeTab(map.category); previewContainer.remove(); document.querySelector('.search-input').value = ''; setTimeout(() => { const mapItems = document.querySelectorAll('.map-item'); mapItems.forEach(item => { if (item.querySelector('h3').textContent.includes(formattedTitle)) { item.classList.add('highlight'); item.scrollIntoView({ behavior: 'smooth', block: 'center' }); setTimeout(() => item.classList.remove('highlight'), 1000); } }); }, 100); }; previewContainer.appendChild(previewItem); }); if (allMatches.length > 0) { previewContainer.style.display = 'block'; searchBox.appendChild(previewContainer); } document.getElementById('maps-grid').style.display = 'flex'; document.getElementById('home-content').style.display = 'none'; displayMaps(allMatches); }); document.addEventListener('click', (e) => { const searchBox = document.querySelector('.search-box'); const searchPreview = document.querySelector('.search-preview'); if (!searchBox.contains(e.target) && searchPreview) { searchPreview.remove(); } });loadSheetData();getDailyRecommendation();updateLastUpdateDate();document.addEventListener('DOMContentLoaded', () => { showPremiumBadge(); });function showPremiumBadge() { if (localStorage.getItem('isSubscriber') === 'true') { const badge = document.createElement('div'); badge.className = 'premium-badge'; badge.innerHTML = ` <i class="fas fa-crown"></i> Premium `; document.body.appendChild(badge); } } function showCoverZoom(coverUrl) { const modal = document.createElement('div'); modal.className = 'cover-modal'; const img = document.createElement('img'); img.className = 'zoomed-cover'; img.src = coverUrl; const closeBtn = document.createElement('button'); closeBtn.className = 'close-cover'; closeBtn.textContent = 'Fechar'; closeBtn.onclick = closeCoverZoom; modal.appendChild(img); modal.appendChild(closeBtn); document.body.appendChild(modal); modal.offsetHeight; requestAnimationFrame(() => { modal.classList.add('show'); img.classList.add('show'); }); } function closeCoverZoom() { const modal = document.querySelector('.cover-modal'); const img = modal.querySelector('.zoomed-cover'); modal.classList.remove('show'); img.classList.remove('show'); setTimeout(() => { modal.remove(); }, 300); }</script></body></html>
